<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="SINTEF ICT">

    <title>MC-Suite operator interface</title>

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
	
	<style>
        .recordrtc button {
            font-size: inherit;
        }
        
        .recordrtc button, .recordrtc select {
            vertical-align: middle;
            line-height: 1;
            padding: 2px 5px;
            height: auto;
            font-size: inherit;
            margin: 0;
        }
        
        .recordrtc, .recordrtc .header {
            display: block;
            text-align: center;
            padding-top: 0;
        }
        
        .recordrtc video {
            width: 70%;
        }
        
        .recordrtc option[disabled] {
            display: none;
        }
    </style>
	<script src="https://cdn.webrtc-experiment.com/RecordRTC.js"></script>
    <script src="https://cdn.webrtc-experiment.com/gif-recorder.js"></script>
    <script src="https://cdn.webrtc-experiment.com/getScreenId.js"></script>
	<!-- for Edige/FF/Chrome/Opera/etc. getUserMedia support -->
    <script src="https://cdn.webrtc-experiment.com/gumadapter.js"></script>

  </head>

  <body>
    <header class="navbar navbar-inverse">
    <div class="container-fluid">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-responsive-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="/" title="MC-Suite Operator Interface">Operator Interface</a>
      </div>
      <div class="navbar-collapse collapse navbar-responsive-collapse">
        <ul class="nav navbar-nav navbar-right">     

          <li><a href="">Export</a></li>
          <li><a href="">Monitoring Dashboard</a></li>
          
          <li class="dropdown">
                <a href="#" data-target="#" class="dropdown-toggle" data-toggle="dropdown">User <b class="caret"></b></a>
                <ul class="dropdown-menu menu-right">
                	 <li><a href="">My Account</a></li>
                    <li><a href="">Logout</a></li>
                </ul>
            </li>
          


        </ul>
      </div>
      <div></div>
    </div>
  </header>
  

  <div class="span4 offset4" id="alert-div" style="position:fixed;width:40%;margin-top:10px;z-index:100000"></div>

    <div id="body" class="container-fluid">
      <!-- Example row of columns -->
      <div class="row">
        <div class="col-md-3">
          <div class="jumbotron">
             <h2>Publish an observation: </h2>


            <form role="form">

            <div class="form-group">
            <label class="control-label">Importance Level:</label>
            <div class="btn-group" data-toggle="buttons">
                <label class="btn btn-success">
                    <input name="level" type="radio" value="Low" /> Low
                </label> 
                <label class="btn btn-warning">
                    <input name="level" type="radio" value="Moderate" /> Moderate
                </label> 
                <label class="btn btn-danger">
                    <input name="level" type="radio"value="High" /> High
                </label> 
            </div>
            </div>


            <br/>

            <div class="form-group">
            <label class="control-label">Occasion:</label>
            <div class="btn-group" data-toggle="buttons">
                <label class="btn btn-default">
                    <input name="occasion" type="radio" value="Planned" /> Planned
                </label> 
                <label class="btn btn-default">
                    <input name="occasion"  type="radio" value="Not Planned" /> Not Planned
                </label> 
            </div>
            </div>

            <br/>

            <div class="form-group">
              <div class="input-group" id="comments">
                <label class="control-label">Comment:</label>
              </div>
            </div>

            <button id="btn-send" class="btn btn-primary">Send!</button>
			<button id="btn-file" class="btn btn-primary">Create file</button>

          </form>
          </div>
        </div>
        <div class="col-md-9">
			<ul class="nav nav-tabs">
			  <li class="active"><a data-toggle="tab" href="#chat">Live Chat</a></li>
			  <li><a data-toggle="tab" href="#camera">Workspace Camera</a></li>
			  <li><a data-toggle="tab" href="#sound">Message recording</a></li>
			</ul>
			<div class="tab-content">
			  <div id="chat" class="tab-pane fade in active">
				<p>
				    <div class="embed-responsive">
					  <!--<iframe class="embed-responsive-item" src="https://192.168.11.20/"></iframe>-->
					</div>
				</p>
			  </div>
			  <div id="camera" class="tab-pane fade">
				<p>
				    <div class="embed-responsive embed-responsive-16by9">
					  <iframe class="embed-responsive-item" src="https://ip-kamera01-ideko.danobatgroup.com/"></iframe>
					</div>
				</p>
			  </div>
			  <div id="sound" class="tab-pane fade">
				<p>
				<div>
       <article>
        <section class="experiment recordrtc">
                <select class="recording-media">
                    <option value="record-video">Video</option>
                    <option value="record-audio">Audio</option>
                    <option value="record-screen">Screen</option>
                </select>
                
                into
                <select class="media-container-format">
                    <option>WebM</option>
                    <option disabled>Mp4</option>
                    <option disabled>WAV</option>
                    <option disabled>Ogg</option>
                    <option>Gif</option>
                </select>
                
                <button id="control" class="btn btn-danger">Start Recording</button>
            <br>
            <div>
                <button class="btn btn-info" id="save-to-disk">Save To Disk</button>
                <button class="btn btn-info" id="open-new-tab">Open New Tab</button>
                <button class="btn btn-info" id="upload-to-server">Upload To Server</button>
            </div>
            
            <br>

            <video controls muted></video>
        </section>
		</article>
				</div>
		<!-- All this is from: https://www.webrtc-experiment.com/RecordRTC/PHP/ -->
		 <script>
            (function() {
                var params = {},
                    r = /([^&=]+)=?([^&]*)/g;

                function d(s) {
                    return decodeURIComponent(s.replace(/\+/g, ' '));
                }

                var match, search = window.location.search;
                while (match = r.exec(search.substring(1))) {
                    params[d(match[1])] = d(match[2]);

                    if(d(match[2]) === 'true' || d(match[2]) === 'false') {
                        params[d(match[1])] = d(match[2]) === 'true' ? true : false;
                    }
                }

                window.params = params;
            })();
        </script>			 
		<script src="js/RecordRTC_MC_Suite.js"></script>

				</p>
			  </div>
			</div>
       </div>

      </div>

      <hr>

    </div> <!-- /container -->

		<footer class="navbar navbar-inverse" role="navigation">
		<nav class="container-fluid">
		  <div class="navbar-header">
			<button class="navbar-toggle" data-toggle="collapse" data-target=".navFooterCollapse">
			  <span class="icon-bar"></span>
			  <span class="icon-bar"></span>
			  <span class="icon-bar"></span>
			</button>
		  </div>
		  <div class="navbar-collapse collapse navbar-responsive-collapse">
			<ul class="nav navbar-nav navbar-left">
			  <li><a href="/documentation/">Documentation</a></li>
			  <li><a href="/api/">API</a></li>
			  <li><a href="/faq/">FAQ</a></li>
			</ul>
			<ul class="nav navbar-nav navbar-right">
			  <li><a href="/terms-of-use/">Terms of use</a></li>
			  <li><a href="/privacy-policy/">Privacy policy</a></li>
			  <li><a href="/cookie-policy/">Cookie policy</a></li>
			  <li><a href="/contact/">Contact</a></li>
			  <li><a href="/feedback/"><i class="mdi-communication-messenger"></i>Feedback</a></li>
			</ul>
		  </div>
		</nav>
	  </footer>

	
    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <!-- Latest compiled and minified JavaScript -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>

    <script>
		var com= ["Everything is OK","Workpiece handling","Machine tool setup","Tool change","Broken insert, tool","Lack of tool, inserts, workpiece, other material","Lack of operator","Lack of other consumable","Machine error","Coolant problem","Strong vibrations","Wrong chip generation","Programming error"];

		for(i = 0; i < com.length; i++) {
		  $('#comments').append('<label class="radio"><input type="radio" name = "optionsRadios" value="'+com[i]+'"/>'+com[i]+'</label>');
		}
		$('#comments').append('<label class="radio"><input type="radio" name = "optionsRadios" value="o"/><input id="freeComment" type="text" /></label>');

    </script>
	
	<script>
		var comments=[];
		if(sessionStorage.getItem('comments')){
			console.log(sessionStorage.getItem('comments'));
			comments = JSON.parse(sessionStorage.getItem('comments'));
		}
		$("#btn-send").click(function() {
			var comment={};
			comment.timestamp=new Date().toLocaleString();
			comment.val=$('input[name="optionsRadios"]:checked').val();
			comment.level=$('input[name="level"]:checked').val();
			if($('input[name="occasion"]:checked').val() === "o"){
				comment.occasion=$('#freeComment').val();
			}else{
				comment.occasion=$('input[name="occasion"]:checked').val();
			}
			comments.push(comment);
			var stringified=JSON.stringify(comments);
			sessionStorage.setItem('comments', stringified);
		});
		
		$("#btn-file").click(function() {
			var comments = sessionStorage.getItem('comments');
			window.open("data:text/json,"+comments);
			sessionStorage.clear();
		});
		
	</script>
  </body>
</html>

